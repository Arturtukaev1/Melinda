!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=Object.freeze({__proto__:null});const t=e=>{let t=[];return Object.keys(e).forEach((r=>{Array.isArray(e[r])?e[r].forEach((e=>t.push(encodeURIComponent(r)+"="+encodeURIComponent(e)))):t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))})),t.join("&")};function r(e,t,r){return(e-t)*(e-r)<=0}var o=(e,o,n=!0,i="POST",s=!1)=>{const{domain:l,profile:f}=window._jst;let c=o;if(n){const{sessionID:e,profileID:t}=f;c={DomainID:l,ProfileID:t,SessionID:e,...o}}return s&&delete c.SessionID,fetch(e,{method:i,headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:c?t(c):{},redirect:"follow"}).then((e=>r(e.status,200,299)?e.json():e.text().then((e=>e))))},n=e=>{const{profile:t,pApi:r,domain:o}=window._jst,{profileID:n,sessionID:i}=t,s={...e,sessionID:i,profileID:n,domainID:o};return fetch(`${r}/v1/public/log-embedcode-exceptions`,{method:"POST",body:JSON.stringify(s)}).then((()=>!0)).catch((e=>!1))};const i=(e,t,r)=>{if(!window._jst.profileProxy)return;const o=document.getElementById(window._jst.profileProxy);if(o){const n=o.contentWindow.document;let i=n.querySelector(`[ju-property-token="${t}"]`);if("thisSession"===t)for(const r in e[t])if(i=n.querySelector(`[ju-property-token="${r}"]`),i)break;if(i){const e=i.getAttribute("ju-token-formula"),o=i.getAttribute("ju-property-token");let n=r;if("thisSession"===t&&(n=r[o]),e)try{n=(e=>{try{e=e.replace(/x/g,"*");const t=new Function(`return ${e}`)();if(Number.isFinite(t))return t;throw new Error("Invalid result")}catch(e){throw new Error("Invalid expression")}})(e.replace(/\{\{(.*?)\}\}/,n/100)),n.toString().includes(".")&&(n=n.toFixed(2))}catch(e){}i.innerHTML=n}}};function s(e,t){const r=t.findIndex((t=>{const{productID:r,variationID:o,sku:n}=e;return r===t.productID&&o===t.variationID&&n===t.sku}));return-1===r?[r,null]:[r,t[r]]}function l(e){const{domain:t,profile:r,utils:o}=window._jst,{_set:n,profileKey:l}=o,{cartItems:f=[]}=r,c=f.length?function(e=[],t=[]){const r=e.reduce(((e,r)=>{const[o,n]=s(r,t);return-1===o?e.push({productID:r.productID,variationID:r.variationID,sku:r.sku,currency:r.currency,name:r.name,thisSession:{discount:r.discount,price:r.price,qty:r.qty},allSessions:{discount:r.discount,price:r.price,qty:r.qty}}):e.push({...n,...r,...n.allSessions&&n.thisSession?{allSessions:{discount:n.allSessions.discount-n.thisSession.discount+r.discount,price:r.price,qty:n.allSessions.qty-n.thisSession.qty+r.qty}}:{},thisSession:{discount:r.discount,price:r.price,qty:r.qty}}),e}),[]);return t.reduce(((e,t)=>{const[r]=s(t,e);return-1===r&&e.push(t),e}),r)}(e,f):e.map((e=>({productID:e.productID,variationID:e.variationID,sku:e.sku,currency:e.currency,name:e.name,thisSession:{discount:e.discount||0,price:e.price,qty:e.qty},allSessions:{discount:e.discount||0,price:e.price,qty:e.qty}})));n(window,"_jst.profile.cartItems",c);const a=c.reduce(((e,t)=>{const{currency:r,thisSession:o}=t,{discount:n=0,qty:i,price:s}=o;return r&&(e.currency=r),i>0&&(e.qty+=i,e.subtotal+=i*s,e.discountTotal+=n,e.grandtotal=e.subtotal-e.discountTotal),e}),{currency:"",discountTotal:0,grandtotal:0,qty:0,shipTotal:0,subtotal:0,taxTotal:0});return n(window,"_jst.profile.cartTotals.thisSession",a),i({thisSession:a},"thisSession",a),sessionStorage.setItem(l(t,r.profileID),JSON.stringify(r)),c}const f=e=>e.reduce(((e,t)=>{const r="string"==typeof t?JSON.parse(t):t;return e||(e=r),a(r.event_time,e.event_time)>0?r:e}),void 0),c=()=>(new Date).toISOString(),a=(e,t)=>{const r=new Date(e),o=new Date(t);return Math.abs(o-r)/36e5},u={click:"clicks",close:"closed",view:"views",frame:"frame","discount-applied":"discountsApplied"};function p(e,t){return e(t={exports:{}},t.exports),t.exports}var d=p((function(e){!function(){var t=[],r=3988292384;function o(e){var t,o,n,i,s=-1;for(t=0,n=e.length;t<n;t+=1){for(i=255&(s^e[t]),o=0;o<8;o+=1)1&~i?i>>>=1:i=i>>>1^r;s=s>>>8^i}return~s}function n(e,r){var o,i,s;if(void 0!==n.crc&&r&&e||(n.crc=~0,e)){for(o=n.crc,i=0,s=e.length;i<s;i+=1)o=o>>>8^t[255&(o^e[i])];return n.crc=o,~o}}!function(){var e,o,n;for(o=0;o<256;o+=1){for(e=o,n=0;n<8;n+=1)1&e?e=r^e>>>1:e>>>=1;t[o]=e>>>0}}(),e.exports=function(e,t){var r;e="string"==typeof e?(r=e,Array.prototype.map.call(r,(function(e){return e.charCodeAt(0)}))):e;return((t?o(e):n(e))>>>0).toString(16)},e.exports.direct=o,e.exports.table=n}()}));d.direct,d.table;var m=p((function(e){!function(){var t,r,o,n,i,s,l,f,c,a,u,p,d,m,w,h,I,_=null,g=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],D=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function j(){this.next=null,this.list=null}function b(){this.e=0,this.b=0,this.n=0,this.t=null}function O(e,t,r,o,n,i){var s;this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var l,f,c,a,u,p,d,m,w,h,I,_,g,D,v,y,k=[],S=[],O=new b,x=[],U=[],A=[];for(y=this.root=null,u=0;u<this.BMAX+1;u++)k[u]=0;for(u=0;u<this.BMAX+1;u++)S[u]=0;for(u=0;u<this.BMAX;u++)x[u]=null;for(u=0;u<this.N_MAX;u++)U[u]=0;for(u=0;u<this.BMAX+1;u++)A[u]=0;l=t>256?e[256]:this.BMAX,m=e,w=0,u=t;do{k[m[w]]++,w++}while(--u>0);if(k[0]===t)return this.root=null,this.m=0,void(this.status=0);for(p=1;p<=this.BMAX&&0===k[p];p++);for(d=p,i<p&&(i=p),u=this.BMAX;0!==u&&0===k[u];u--);for(c=u,i>u&&(i=u),g=1<<p;p<u;p++,g<<=1)if((g-=k[p])<0)return this.status=2,void(this.m=i);if((g-=k[u])<0)return this.status=2,void(this.m=i);for(k[u]+=g,A[1]=p=0,m=k,w=1,_=2;--u>0;)A[_++]=p+=m[w++];m=e,w=0,u=0;do{0!==(p=m[w++])&&(U[A[p]++]=u)}while(++u<t);for(t=A[c],A[0]=u=0,m=U,w=0,a=-1,I=S[0]=0,h=null,D=0;d<=c;d++)for(s=k[d];s-- >0;){for(;d>I+S[1+a];){if(I+=S[1+a],a++,D=(D=c-I)>i?i:D,(f=1<<(p=d-I))>s+1)for(f-=s+1,_=d;++p<D&&!((f<<=1)<=k[++_]);)f-=k[_];for(I+p>l&&I<l&&(p=l-I),D=1<<p,S[1+a]=p,h=[],v=0;v<D;v++)h[v]=new b;(y=y?y.next=new j:this.root=new j).next=null,y.list=h,x[a]=h,a>0&&(A[a]=u,O.b=S[a],O.e=16+p,O.t=h,p=(u&(1<<I)-1)>>I-S[a],x[a-1][p].e=O.e,x[a-1][p].b=O.b,x[a-1][p].n=O.n,x[a-1][p].t=O.t)}for(O.b=d-I,w>=t?O.e=99:m[w]<r?(O.e=m[w]<256?16:15,O.n=m[w++]):(O.e=n[m[w]-r],O.n=o[m[w++]-r]),f=1<<d-I,p=u>>I;p<D;p+=f)h[p].e=O.e,h[p].b=O.b,h[p].n=O.n,h[p].t=O.t;for(p=1<<d-1;u&p;p>>=1)u^=p;for(u^=p;(u&(1<<I)-1)!==A[a];)I-=S[a],a--}this.m=S[1],this.status=0!==g&&1!==c?1:0}function x(e){for(;l<e;)s|=(h.length===I?-1:255&h[I++])<<l,l+=8}function U(e){return s&g[e]}function A(e){s>>=e,l-=e}function N(e,o,n){var i,s,l;if(0===n)return 0;for(l=0;;){for(x(m),i=(s=p.list[U(m)]).e;i>16;){if(99===i)return-1;A(s.b),x(i-=16),i=(s=s.t[U(i)]).e}if(A(s.b),16!==i){if(15===i)break;for(x(i),a=s.n+U(i),A(i),x(w),i=(s=d.list[U(w)]).e;i>16;){if(99===i)return-1;A(s.b),x(i-=16),i=(s=s.t[U(i)]).e}for(A(s.b),x(i),u=r-s.n-U(i),A(i);a>0&&l<n;)a--,u&=32767,r&=32767,e[o+l++]=t[r++]=t[u++];if(l===n)return n}else if(r&=32767,e[o+l++]=t[r++]=s.n,l===n)return n}return f=-1,l}function C(e,o,n){var i;if(A(i=7&l),x(16),i=U(16),A(16),x(16),i!==(65535&~s))return-1;for(A(16),a=i,i=0;a>0&&i<n;)a--,r&=32767,x(8),e[o+i++]=t[r++]=U(8),A(8);return 0===a&&(f=-1),i}function P(e,t,r){if(!_){var s,l,f=[];for(s=0;s<144;s++)f[s]=8;for(;s<256;s++)f[s]=9;for(;s<280;s++)f[s]=7;for(;s<288;s++)f[s]=8;if(0!==(l=new O(f,288,257,D,v,n=7)).status)return console.error("HufBuild error: "+l.status),-1;for(_=l.root,n=l.m,s=0;s<30;s++)f[s]=5;if((l=new O(f,30,0,y,k,i=5)).status>1)return _=null,console.error("HufBuild error: "+l.status),-1;o=l.root,i=l.m}return p=_,d=o,m=n,w=i,N(e,t,r)}function R(e,t,r){var o,n,i,s,l,f,c,a,u,h=[];for(o=0;o<316;o++)h[o]=0;if(x(5),c=257+U(5),A(5),x(5),a=1+U(5),A(5),x(4),f=4+U(4),A(4),c>286||a>30)return-1;for(n=0;n<f;n++)x(3),h[S[n]]=U(3),A(3);for(;n<19;n++)h[S[n]]=0;if(0!==(u=new O(h,19,19,null,null,m=7)).status)return-1;for(p=u.root,m=u.m,s=c+a,o=i=0;o<s;)if(x(m),A(n=(l=p.list[U(m)]).b),(n=l.n)<16)h[o++]=i=n;else if(16===n){if(x(2),n=3+U(2),A(2),o+n>s)return-1;for(;n-- >0;)h[o++]=i}else if(17===n){if(x(3),n=3+U(3),A(3),o+n>s)return-1;for(;n-- >0;)h[o++]=0;i=0}else{if(x(7),n=11+U(7),A(7),o+n>s)return-1;for(;n-- >0;)h[o++]=0;i=0}if(u=new O(h,c,257,D,v,m=9),0===m&&(u.status=1),0!==u.status&&1!==u.status)return-1;for(p=u.root,m=u.m,o=0;o<a;o++)h[o]=h[o+c];return u=new O(h,a,0,y,k,w=6),d=u.root,0===(w=u.m)&&c>257||0!==u.status?-1:N(e,t,r)}function T(e,o,n){var i,s;for(i=0;i<n;){if(c&&-1===f)return i;if(a>0){if(0!==f)for(;a>0&&i<n;)a--,u&=32767,r&=32767,e[o+i++]=t[r++]=t[u++];else{for(;a>0&&i<n;)a--,r&=32767,x(8),e[o+i++]=t[r++]=U(8),A(8);0===a&&(f=-1)}if(i===n)return i}if(-1===f){if(c)break;x(1),0!==U(1)&&(c=!0),A(1),x(2),f=U(2),A(2),p=null,a=0}switch(f){case 0:s=C(e,o+i,n-i);break;case 1:s=p?N(e,o+i,n-i):P(e,o+i,n-i);break;case 2:s=p?N(e,o+i,n-i):R(e,o+i,n-i);break;default:s=-1}if(-1===s)return c?0:-1;i+=s}return i}e.exports=function(e){var o,n=[];t||(t=[]),r=0,s=0,l=0,f=-1,c=!1,a=u=0,p=null,h=e,I=0;do{o=T(n,n.length,1024)}while(o>0);return h=null,n}}()})),w=p((function(e){!function(){var t,r,o,n,i,s,l,f,c,a,u,p,d,m,w,h,I,_,g,D,v,y,k,S,j,b,O,x,U,A,N,C,P,R,T,E,$,L,J,M,q,z,B,V,X,F,W,H,K,G,Z,Q,Y,ee,te,re,oe=32768,ne=258,ie=32768,se=32767,le=262,fe=32506,ce=15,ae=256,ue=286,pe=30,de=parseInt(17/3,10),me=null;function we(){this.fc=0,this.dl=0}function he(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function Ie(e,t,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=o}function _e(){this.next=null,this.len=0,this.ptr=[],this.off=0}var ge=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],De=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ke=[new Ie(0,0,0,0),new Ie(4,4,8,4),new Ie(4,5,16,8),new Ie(4,6,32,32),new Ie(4,4,16,16),new Ie(8,16,32,32),new Ie(8,16,128,128),new Ie(8,32,128,256),new Ie(32,128,258,1024),new Ie(32,258,258,4096)];function Se(e){e.next=t,t=e}function je(e){return u[oe+e]}function be(e,t){return u[oe+e]=t}function Oe(e){me[s+i++]=e,s+i===8192&&function(){var e,n;if(0!==i){for(null!==t?(l=t,t=t.next):l=new _e,l.next=null,l.len=l.off=0,e=l,null===r?r=o=e:o=o.next=e,e.len=i-s,n=0;n<e.len;n++)e.ptr[n]=me[s+n];i=s=0}var l}()}function xe(e){e&=65535,s+i<8190?(me[s+i++]=255&e,me[s+i++]=e>>>8):(Oe(255&e),Oe(e>>>8))}function Ue(){w=(w<<de^255&f[v+3-1])&se,h=je(w),u[32767&v]=h,be(w,v)}function Ae(e,t){Ke(t[e].fc,t[e].dl)}function Ne(e){return 255&(e<256?V[e]:V[256+(e>>7)])}function Ce(e,t,r){return e[t].fc<e[r].fc||e[t].fc===e[r].fc&&z[t]<=z[r]}function Pe(e,t,r){var o;for(o=0;o<r&&re<te.length;o++)e[t+o]=255&te[re++];return o}function Re(e){var t,r,o,n,i=j,s=v,l=D,c=v>fe?v-fe:0,a=v+ne,p=f[s+l-1],d=f[s+l];D>=x&&(i>>=2);do{if(f[(t=e)+l]===d&&f[t+l-1]===p&&f[t]===f[s]&&f[++t]===f[s+1]){for(s+=2,t++;s<a;){for(n=!1,o=0;o<8;o+=1)if(t+=1,f[s+=1]!==f[t]){n=!0;break}if(n)break}if(r=ne-(a-s),s=a-ne,r>l){if(y=e,l=r,r>=U)break;p=f[s+l-1],d=f[s+l]}}}while((e=u[32767&e])>c&&0!=--i);return l}function Te(){var e,t,r=65536-S-v;if(-1===r)r--;else if(v>=65274){for(e=0;e<oe;e++)f[e]=f[e+oe];for(y-=oe,v-=oe,m-=oe,e=0;e<ie;e++)be(e,(t=je(e))>=oe?t-oe:0);for(e=0;e<oe;e++)t=u[e],u[e]=t>=oe?t-oe:0;r+=oe}k||((e=Pe(f,v+S,r))<=0?k=!0:S+=e)}function Ee(){k||(p=0,d=0,function(){var e,t,r,o,n;if(0!==P[0].dl)return;for(T.dyn_tree=A,T.static_tree=C,T.extra_bits=ge,T.extra_base=257,T.elems=ue,T.max_length=ce,T.max_code=0,E.dyn_tree=N,E.static_tree=P,E.extra_bits=De,E.extra_base=0,E.elems=pe,E.max_length=ce,E.max_code=0,$.dyn_tree=R,$.static_tree=null,$.extra_bits=ve,$.extra_base=0,$.elems=19,$.max_length=7,$.max_code=0,r=0,o=0;o<28;o++)for(X[o]=r,e=0;e<1<<ge[o];e++)B[r++]=o;for(B[r-1]=o,n=0,o=0;o<16;o++)for(F[o]=n,e=0;e<1<<De[o];e++)V[n++]=o;for(n>>=7;o<pe;o++)for(F[o]=n<<7,e=0;e<1<<De[o]-7;e++)V[256+n++]=o;for(t=0;t<=ce;t++)L[t]=0;e=0;for(;e<=143;)C[e++].dl=8,L[8]++;for(;e<=255;)C[e++].dl=9,L[9]++;for(;e<=279;)C[e++].dl=7,L[7]++;for(;e<=287;)C[e++].dl=8,L[8]++;for(qe(C,287),e=0;e<pe;e++)P[e].dl=5,P[e].fc=Ge(e,5);Je()}(),function(){var e;for(e=0;e<ie;e++)u[oe+e]=0;if(b=ke[O].max_lazy,x=ke[O].good_length,U=ke[O].nice_length,j=ke[O].max_chain,v=0,m=0,(S=Pe(f,0,65536))<=0)return k=!0,void(S=0);for(k=!1;S<le&&!k;)Te();for(w=0,e=0;e<2;e++)w=(w<<de^255&f[e])&se}(),r=null,i=0,s=0,O<=3?(D=2,g=0):(g=2,_=!1),l=!1)}function $e(e,t,o){var i;return n||(Ee(),n=!0,0!==S)?(i=Le(e,t,o))===o?o:l?i:(O<=3?function(){for(;0!==S&&null===r;){var e;if(Ue(),0!==h&&v-h<=fe&&(g=Re(h))>S&&(g=S),g>=3)if(e=Fe(v-y,g-3),S-=g,g<=b){g--;do{v++,Ue()}while(0!=--g);v++}else v+=g,g=0,w=((w=255&f[v])<<de^255&f[v+1])&se;else e=Fe(0,255&f[v]),S--,v++;for(e&&(Xe(0),m=v);S<le&&!k;)Te()}}():function(){for(;0!==S&&null===r;){if(Ue(),D=g,I=y,g=2,0!==h&&D<b&&v-h<=fe&&((g=Re(h))>S&&(g=S),3===g&&v-y>4096&&g--),D>=3&&g<=D){var e;e=Fe(v-1-I,D-3),S-=D-1,D-=2;do{v++,Ue()}while(0!=--D);_=!1,g=2,v++,e&&(Xe(0),m=v)}else _?(Fe(0,255&f[v-1])&&(Xe(0),m=v),v++,S--):(_=!0,v++,S--);for(;S<le&&!k;)Te()}}(),0===S&&(_&&Fe(0,255&f[v-1]),Xe(1),l=!0),i+Le(e,i+t,o-i)):(l=!0,0)}function Le(e,t,o){var n,l,f;for(n=0;null!==r&&n<o;){for((l=o-n)>r.len&&(l=r.len),f=0;f<l;f++)e[t+n+f]=r.ptr[r.off+f];var c;if(r.off+=l,r.len-=l,n+=l,0===r.len)c=r,r=r.next,Se(c)}if(n===o)return n;if(s<i){for((l=o-n)>i-s&&(l=i-s),f=0;f<l;f++)e[t+n+f]=me[s+f];n+=l,i===(s+=l)&&(i=s=0)}return n}function Je(){var e;for(e=0;e<ue;e++)A[e].fc=0;for(e=0;e<pe;e++)N[e].fc=0;for(e=0;e<19;e++)R[e].fc=0;A[256].fc=1,Y=ee=0,H=K=G=0,Z=0,Q=1}function Me(e,t){for(var r=J[t],o=t<<1;o<=M&&(o<M&&Ce(e,J[o+1],J[o])&&o++,!Ce(e,r,J[o]));)J[t]=J[o],t=o,o<<=1;J[t]=r}function qe(e,t){var r,o,n=[],i=0;for(r=1;r<=ce;r++)i=i+L[r-1]<<1,n[r]=i;for(o=0;o<=t;o++){var s=e[o].dl;0!==s&&(e[o].fc=Ge(n[s]++,s))}}function ze(e){var t,r,o=e.dyn_tree,n=e.static_tree,i=e.elems,s=-1,l=i;for(M=0,q=573,t=0;t<i;t++)0!==o[t].fc?(J[++M]=s=t,z[t]=0):o[t].dl=0;for(;M<2;){var f=J[++M]=s<2?++s:0;o[f].fc=1,z[f]=0,Y--,null!==n&&(ee-=n[f].dl)}for(e.max_code=s,t=M>>1;t>=1;t--)Me(o,t);do{t=J[1],J[1]=J[M--],Me(o,1),r=J[1],J[--q]=t,J[--q]=r,o[l].fc=o[t].fc+o[r].fc,z[t]>z[r]+1?z[l]=z[t]:z[l]=z[r]+1,o[t].dl=o[r].dl=l,J[1]=l++,Me(o,1)}while(M>=2);J[--q]=J[1],function(e){var t,r,o,n,i,s,l=e.dyn_tree,f=e.extra_bits,c=e.extra_base,a=e.max_code,u=e.max_length,p=e.static_tree,d=0;for(n=0;n<=ce;n++)L[n]=0;for(l[J[q]].dl=0,t=q+1;t<573;t++)(n=l[l[r=J[t]].dl].dl+1)>u&&(n=u,d++),l[r].dl=n,r>a||(L[n]++,i=0,r>=c&&(i=f[r-c]),s=l[r].fc,Y+=s*(n+i),null!==p&&(ee+=s*(p[r].dl+i)));if(0!==d){do{for(n=u-1;0===L[n];)n--;L[n]--,L[n+1]+=2,L[u]--,d-=2}while(d>0);for(n=u;0!==n;n--)for(r=L[n];0!==r;)(o=J[--t])>a||(l[o].dl!==n&&(Y+=(n-l[o].dl)*l[o].fc,l[o].fc=n),r--)}}(e),qe(o,s)}function Be(e,t){var r,o,n=-1,i=e[0].dl,s=0,l=7,f=4;for(0===i&&(l=138,f=3),e[t+1].dl=65535,r=0;r<=t;r++)o=i,i=e[r+1].dl,++s<l&&o===i||(s<f?R[o].fc+=s:0!==o?(o!==n&&R[o].fc++,R[16].fc++):s<=10?R[17].fc++:R[18].fc++,s=0,n=o,0===i?(l=138,f=3):o===i?(l=6,f=3):(l=7,f=4))}function Ve(e,t){var r,o,n=-1,i=e[0].dl,s=0,l=7,f=4;for(0===i&&(l=138,f=3),r=0;r<=t;r++)if(o=i,i=e[r+1].dl,!(++s<l&&o===i)){if(s<f)do{Ae(o,R)}while(0!=--s);else 0!==o?(o!==n&&(Ae(o,R),s--),Ae(16,R),Ke(s-3,2)):s<=10?(Ae(17,R),Ke(s-3,3)):(Ae(18,R),Ke(s-11,7));s=0,n=o,0===i?(l=138,f=3):o===i?(l=6,f=3):(l=7,f=4)}}function Xe(e){var t,r,o,n,i;if(n=v-m,W[G]=Z,ze(T),ze(E),o=function(){var e;for(Be(A,T.max_code),Be(N,E.max_code),ze($),e=18;e>=3&&0===R[ye[e]].dl;e--);return Y+=3*(e+1)+5+5+4,e}(),(r=ee+3+7>>3)<=(t=Y+3+7>>3)&&(t=r),n+4<=t&&m>=0)for(Ke(0+e,3),Ze(),xe(n),xe(~n),i=0;i<n;i++)Oe(f[m+i]);else r===t?(Ke(2+e,3),We(C,P)):(Ke(4+e,3),function(e,t,r){var o;for(Ke(e-257,5),Ke(t-1,5),Ke(r-4,4),o=0;o<r;o++)Ke(R[ye[o]].dl,3);Ve(A,e-1),Ve(N,t-1)}(T.max_code+1,E.max_code+1,o+1),We(A,N));Je(),0!==e&&Ze()}function Fe(e,t){if(a[H++]=t,0===e?A[t].fc++:(e--,A[B[t]+ae+1].fc++,N[Ne(e)].fc++,c[K++]=e,Z|=Q),Q<<=1,7&H||(W[G++]=Z,Z=0,Q=1),O>2&&!(4095&H)){var r,o=8*H,n=v-m;for(r=0;r<pe;r++)o+=N[r].fc*(5+De[r]);if(o>>=3,K<parseInt(H/2,10)&&o<parseInt(n/2,10))return!0}return 8191===H||8192===K}function We(e,t){var r,o,n,i,s=0,l=0,f=0,u=0;if(0!==H)do{7&s||(u=W[f++]),o=255&a[s++],1&u?(Ae((n=B[o])+ae+1,e),0!==(i=ge[n])&&Ke(o-=X[n],i),Ae(n=Ne(r=c[l++]),t),0!==(i=De[n])&&Ke(r-=F[n],i)):Ae(o,e),u>>=1}while(s<H);Ae(256,e)}var He=16;function Ke(e,t){d>He-t?(xe(p|=e<<d),p=e>>He-d,d+=t-He):(p|=e<<d,d+=t)}function Ge(e,t){var r=0;do{r|=1&e,e>>=1,r<<=1}while(--t>0);return r>>1}function Ze(){d>8?xe(p):d>0&&Oe(p),p=0,d=0}e.exports=function(e,i){var s,l;te=e,re=0,void 0===i&&(i=6),function(e){var i;if(e?e<1?e=1:e>9&&(e=9):e=6,O=e,n=!1,k=!1,null===me){for(t=r=o=null,me=[],f=[],c=[],a=[],u=[],A=[],i=0;i<573;i++)A[i]=new we;for(N=[],i=0;i<61;i++)N[i]=new we;for(C=[],i=0;i<288;i++)C[i]=new we;for(P=[],i=0;i<pe;i++)P[i]=new we;for(R=[],i=0;i<39;i++)R[i]=new we;T=new he,E=new he,$=new he,L=[],J=[],z=[],B=[],V=[],X=[],F=[],W=[]}}(i),l=[];do{s=$e(l,l.length,1024)}while(s>0);return te=null,l},e.exports.DEFAULT_LEVEL=6}()}));w.DEFAULT_LEVEL;var h=p((function(e){e.exports={inflate:m,deflate:w}})),I=p((function(e){!function(){var t=d,r=h,o={deflate:8},n=1,i=2,s=4,l=8,f=16,c={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18};function a(e,t){t.push(255&e)}function u(e,t){t.push(255&e),t.push(e>>>8)}function p(e,t){u(65535&e,t),u(e>>>16,t)}function m(e){return e.shift()}function w(e){return e.shift()|e.shift()<<8}function I(e){var t=w(e),r=w(e);return r>32768?((r-=32768)<<16|t)+32768*Math.pow(2,16):r<<16|t}function _(e){for(var t=[];0!==e[0];)t.push(String.fromCharCode(e.shift()));return e.shift(),t.join("")}e.exports={zip:function(e,n){var i,s=0,f=[];return n||(n={}),i=n.level||6,"string"==typeof e&&(e=Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)}))),a(31,f),a(139,f),a(o.deflate,f),n.name&&(s|=l),a(s,f),p(n.timestamp||parseInt(Date.now()/1e3,10),f),a(1===i?4:9===i?2:0,f),a(c.unix,f),n.name&&(!function(e,t){var r,o=e.length;for(r=0;r<o;r+=1)a(e.charCodeAt(r),t)}(n.name.substring(n.name.lastIndexOf("/")+1),f),a(0,f)),r.deflate(e,i).forEach((function(e){a(e,f)})),p(parseInt(t(e),16),f),p(e.length,f),f},unzip:function(e,a){var u,p,d,h,g=Array.prototype.slice.call(e,0);if(31!==m(g)||139!==m(g))throw"Not a GZIP file";if(u=m(g),!(u=Object.keys(o).some((function(e){return p=e,o[e]===u}))))throw"Unsupported compression method";if(d=m(g),I(g),m(g),u=m(g),Object.keys(c).some((function(e){if(c[e]===u)return!0})),d&s&&function(e,t){var r,o=[];for(r=0;r<t;r+=1)o.push(e.shift())}(g,u=w(g)),d&l&&_(g),d&f&&_(g),d&i&&w(g),"deflate"===p&&(h=r.inflate(g.splice(0,g.length-8))),d&n&&(h=Array.prototype.map.call(h,(function(e){return String.fromCharCode(e)})).join("")),I(g)!==parseInt(t(h),16))throw"Checksum does not match";if(I(g)!==h.length)throw"Size of decompressed file not correct";return h},get DEFAULT_LEVEL(){return 6}}}()}));I.zip,I.unzip,I.DEFAULT_LEVEL;var _=(e,t,r=!0,o="POST",n={})=>{const{domain:i,profile:s}=window._jst;let l=t;if(r){const{sessionID:e,profileID:r}=s;l=Array.isArray(l)?l.map((t=>({...t,domainid:i,profileid:r,sessionid:e}))):{domainid:i,profileid:r,sessionid:e,...t}}return n.gzip&&(delete n.gzip,l=I.zip(JSON.stringify(l)),n={...n,headers:new Headers({"Content-Type":"application/json","Content-Encoding":"gzip"})}),fetch(e,{method:o,headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(l),redirect:"follow",...n}).then((e=>{return((t=e.status)-200)*(t-299)<=0?e.json():e.text().then((e=>e));var t}))};const g=(e,t)=>{for(const r in t)e[r]&&(t[r]=!0);return t};const D=({workflowID:e,stepID:t,tests:r,ifElse:o})=>{const{domain:n,profile:i,utils:s}=window._jst,{_set:l,profileKey:u}=s,{sessionID:p,multivariates:d}=i,m={stepID:t,sessionID:p,timestamp:(new Date).toISOString(),local:!0};if(l(window,`_jst.profile.workflowActivity.${e}.thisSession`,m),r){const o=d||[];let n=f(o.filter((r=>{const o=JSON.parse(r);return o.multivariate_id===t&&o.workflow_id===e})));const i=[...o,JSON.stringify({event_time:m.timestamp,multivariate_id:t,variation_id:r.stepID,workflow_id:e})];l(window,`_jst.profile.workflowActivity.${e}.tests`,r||null),n?a(c(),n.event_time)>=1&&l(window,"_jst.profile.multivariates",i):l(window,"_jst.profile.multivariates",i)}o&&l(window,`_jst.profile.workflowActivity.${e}.ifElse`,o||null),sessionStorage.setItem(u(n,i.profileID),JSON.stringify(i))},v=(e={},t,r,o)=>{const n=e.steps.findIndex((e=>e.step_id===r));"workflow-step-start"===t?n>=0?e.steps[n].start_time=(new Date).toISOString():e.steps.push({step_id:r,start_time:(new Date).toISOString(),end_time:null}):"workflow-step-end"===t?("start"===r&&(e.enrolled_time=(new Date).toISOString()),n>=0?e.steps[n].end_time=(new Date).toISOString():e.steps.push({step_id:r,start_time:null,end_time:(new Date).toISOString()})):"workflow-end"===t&&(e.end_time=(new Date).toISOString(),o&&(e.unenroll=o))},y=({workflowID:e,stepID:t,EventType:r},o)=>{const{domain:n,profile:i,utils:s}=window._jst,{_set:l,profileKey:f}=s,c=i.enrolled_workflows||[],a=JSON.parse(JSON.stringify(c));let u={enrolled_time:null,end_time:null,workflow_id:e,steps:[]};const p=a.findIndex((t=>JSON.parse(t).workflow_id===e));p>=0?(u=JSON.parse(a[p]),v(u,r,t,o),a[p]=JSON.stringify(u)):(v(u,r,t,o),a.push(JSON.stringify(u))),l(window,"_jst.profile.enrolled_workflows",a),sessionStorage.setItem(f(n,i.profileID),JSON.stringify(i))},k=e=>{const{domain:t,profile:r,utils:o}=window._jst,{_set:n,profileKey:i}=o,{workflowPost:s=[]}=r;n(window,"_jst.profile.workflowPost",e?[...s,e]:[]),sessionStorage.setItem(i(t,r.profileID),JSON.stringify(r))},S=e=>setTimeout((()=>(e=>{const{profile:t}=window._jst,{workflowPost:r=[]}=t;r.length>0&&(_(e,r,!0,"POST",{keepalive:!0,gzip:!0}),k())})(e)),500);const j={app:e=>{const{profile:t,pApi:r}=window._jst,{profileID:o}=t,n={workflowID:e.workflowID,stepID:e.stepID,profileID:o};return fetch(`${r}/v1/public/subscribe`,{method:"POST",body:JSON.stringify(n)}).then((()=>!0)).catch((e=>!1))},cartSync:e=>{try{const{pApi:t,profile:r,config:n,currentUrl:i,referringUrl:s,originalReferringUrl:f}=window._jst,c=`${t}/v1/public/cart-sync`,{workflows:a}=n,{cartData:u={thisSession:{}},device:p,workflows:d,segments:m,promos:w,multivariates:h,enrolled_workflows:I,elements:_,isNewProfile:g,utmCampaign:D,utmChannel:v,utmMedium:y,utmSource:k,productRecs:S={}}=r;let j="";const{currency:b="",token:O="",items_subtotal_price:x=0,total_price:U=0,item_count:A=0}=window._jucart||{};void 0!==window._jucustId&&null!==window._jucustId&&""!==window._jucustId?j=window._jucustId:void 0!==window._jucustomId&&null!==window._jucustomId&&""!==window._jucustomId?j=window._jucustomId:void 0!==u.thisSession.customerID&&null!==u.thisSession.customerID&&""!==u.thisSession.customerID&&(j=u.thisSession.customerID);const N={cartID:u.thisSession.token||O,pageID:r.pageID,customerID:j,currency:u.thisSession.currency||b,platformType:u.thisSession.platformType||window._juplatformtype||"",totalItems:u.thisSession.qty||A,totalPrice:u.thisSession.totalPrice||U,subtotalPrice:u.thisSession.subTotal||x,countryCode:window._jucountrycode,currentURL:i,referralURL:s,originalReferralURL:f,UtmSource:k,UtmMedium:y,UtmChannel:v,UtmCampaign:D,device:p,workflows:d,segments:m,promos:w,multivariates:h,EnrolledWorkflows:I,elements:_,isNewProfile:g,cartItems:JSON.stringify(e.map((e=>e.qty?{productRec:S[e.productID]||{},productID:e.productID,variationID:e.variationID,sku:e.sku,qty:e.qty,price:Math.round(e.price),discount:Math.round(e.discount),name:e.name}:e)))};return Object.keys(a).length>0&&(N.accountID=a[Object.keys(a)[0]].start.accountID),l(e),window.ju4app("recheckCondition","ju4-"+Date.now()),o(c,N)}catch(e){n({error:e.stack,route:"/v1/public/cart-sync"})}},conversion:e=>{try{const{pApi:t,profile:r,currentUrl:n,referringUrl:i,originalReferringUrl:s}=window._jst,{cartItems:l,cartData:f={thisSession:{}},workflowActivity:c={},discountCodes:a=[],variants:u,device:p,workflows:d,segments:m,promos:w,multivariates:h,enrolled_workflows:I,elements:_,isNewProfile:g,utmCampaign:D,utmChannel:v,utmMedium:y,utmSource:k,productRecs:S={}}=r,{discountCodes:j=[],cartItems:b,customerID:O,...x}=e,U=`${t}/v1/public/conversion`;let A="";const N=b||l||[];null!==f.thisSession.customerID&&void 0!==f.thisSession.customerID&&(A=f.thisSession.customerID),void 0!==window._jucustId&&null!==window._jucustId&&(A=window._jucustId),void 0!==window._jucustomId&&null!==window._jucustomId&&(A=window._jucustomId),u&&(x.stepID=u.join(",")),S&&(x.productRecs=Object.keys(S).map((e=>JSON.stringify(S[e]))));const C={...x,customerID:A,workflows:d,segments:m,promos:w,multivariates:h,elements:_,EnrolledWorkflows:I,platformType:window._juplatformtype||"",isNewProfile:g,pageID:r.pageID,currentURL:n,referralURL:i,originalReferralURL:s,UtmSource:k,UtmMedium:y,UtmChannel:v,UtmCampaign:D,device:p,discountCodes:JSON.stringify([...a,...j]),cartItems:JSON.stringify(N.map((e=>({...e,attribution:Object.keys(c).map((e=>({workflowId:e,stepId:c[e]&&c[e].thisSession?c[e].thisSession.stepID:""}))),productRec:S[e.productID]||{},productID:e.productID.toString(),variationID:e.variationID.toString()}))))};return o(U,C)}catch(e){n({error:e.stack,route:"/v1/public/conversion"})}},discount:e=>{const{pApi:t,profile:r,domain:o}=window._jst,{discountID:n,workflowID:i,stepID:s}=e,{profileID:l}=r;return new Promise(((e,r)=>fetch(`${t}/v1/public/get-discount-code/${n}/${l}?workflowID=${i}&stepID=${s}&domainID=${o}`).then((e=>e.json())).then((t=>{t&&e(t)})).catch((e=>r(e)))))},display:e=>{try{const{pApi:t,profile:r,store:n,utils:i,domain:s,currentUrl:l,referringUrl:p,originalReferringUrl:d}=window._jst,{_get:m,_set:w,profileKey:h}=i;0===e.TimeViewed&&(e.TimeViewed=1);const{promoID:I,workflowID:_,eventType:g,frameID:D,TimeViewed:v,clickedID:y,eventDetail:k,stepID:S}=e,j="click"===g||"view"===g?`promoEvents.${I}.${u[g]}.thisSession.${_}`:`promoEvents.${I}.${u[g]}.thisSession`,b=c(),O=m(r,j,null),x=m(r,"promos")||[],U=m(r,"elements")||[];let A=f(x.filter((e=>{const t=JSON.parse(e);return t.workflow_id===_&&t.step_id===S}))),N=f(U.filter((e=>{const t=JSON.parse(e);return t.promo_id===I&&t.frame_id===D&&t.element_id===y&&t.event_type===g})));const C=[...x,JSON.stringify({event_time:(new Date).toISOString(),event_detail:k,event_type:g,promo_id:I,workflow_id:_,step_id:S})],P=[...U||[],JSON.stringify({element_id:y,event_time:(new Date).toISOString(),event_type:g,frame_id:D,promo_id:I})];return O?(O.qty=O.qty+1,O.timestamp=(new Date).toISOString(),O.timeViewed=O.timeViewed?O.timeViewed+v:v,O.frameIDs?O.frameIDs.push(D):O.frameIDs=[D],y&&(O.clickIDs?O.clickIDs[y]?O.clickIDs[y]=O.clickIDs[y]+1:O.clickIDs[y]=1:O.clickIDs={[y]:1}),w(r,j,O)):w(r,j,{...y?{clickIDs:{[y]:1}}:{},qty:1,frameIDs:[D],timeViewed:v,timestamp:(new Date).toISOString()}),n.dispatch("setPromoEvents",{eventPath:j,clickedID:y,frameID:D,TimeViewed:v}),N?a(b,N.event_time)>=1&&w(r,"elements",P):w(r,"elements",P),A?a(b,A.event_time)>=1&&w(r,"promos",C):w(r,"promos",C),sessionStorage.setItem(h(s,r.profileID),JSON.stringify(r)),r.customerID&&(e.customerID=r.customerID),o(`${t}/v1/public/display`,{...e,device:r.device,pageID:r.pageID,workflows:r.workflows,segments:r.segments,promos:r.promos,multivariates:r.multivariates,EnrolledWorkflows:r.enrolled_workflows,elements:r.elements,isNewProfile:r.isNewProfile,currentURL:l,referralURL:p,platformType:window._juplatformtype||"",originalReferralURL:d,UtmSource:r.utmSource,UtmMedium:r.utmMedium,UtmChannel:r.utmChannel,UtmCampaign:r.utmCampaign})}catch(t){const{promoID:r,workflowID:o,stepID:i}=e;n({promoID:r,workflowID:o,stepID:i,error:t.stack,route:"/v1/public/display"})}},formPost:o,getOnSite:(e,t)=>{const{pApi:r,domain:o,utils:n}=window._jst,{fetchP:i}=n;return i(`${r}/v1/public/canvas-prod/${o}/${t}`,{callback:`jcb${e}${t}`})},index:e,jsonPost:_,pageunload:(e=!0)=>{try{const{profile:e,pApi:t,currentUrl:r,referringUrl:o,originalReferringUrl:n}=window._jst,{pageID:i,device:s,workflows:l,segments:f,promos:c,multivariates:a,enrolled_workflows:u,elements:p,isNewProfile:d,customerID:m,utmCampaign:w,utmChannel:h,utmMedium:I,utmSource:g}=e,D=`${t}/v1/public/unload`,v={pageid:i,device:s,workflows:l,segments:f,promos:c,multivariates:a,enrolled_workflows:u,elements:p,isNewProfile:d,platformType:window._juplatformtype||"",currentURL:r,referralURL:o,originalReferralURL:n,utmCampaign:w,utmChannel:h,utmMedium:I,utmSource:g};return window._juprodId&&(v.prodid=window._juprodId.toString()),m&&(v.customerID=m),_(D,v,!0,"POST",{keepalive:!0})}catch(e){n({error:e.stack,route:"/v1/public/unload"})}},properties:(e,t,r,o)=>{try{const{pApi:n,profile:i,currentUrl:s,referringUrl:l,originalReferringUrl:f,config:c,utils:a}=window._jst,{emails:u,profileData:p,device:d,workflows:m,segments:w,promos:h,multivariates:I,enrolled_workflows:D,elements:v,isNewProfile:y,customerID:k,utmCampaign:S,utmChannel:j,utmMedium:b,utmSource:O,updatedProps:x}=i,{queryString:U}=a,{discountSettings:A}=c,{discountSetting:N}=A||{},{sms:C}=p||{};let P=`${n}/v1/public/properties`,R={};if("string"==typeof N&&""!==N){const{emailVerification:e,emailPrediction:t,freeDomainEmails:r="allow",unknownAddress:o="allow",disposableAddress:n="allow",roleBasedEmails:i="allow",verifyNumber:s,allowOtherCountries:l="allow"}=JSON.parse(N);let f={};e&&(f={freeDomainEmails:"allow"===r,roleBasedEmails:"allow"===i,disposableAddress:"allow"===n,unknownAddress:"allow"===o,emailPrediction:"no"!==window._jst_suggestDomain&&!!t}),s&&(f={...f,verifyNumber:s,allowOtherCountries:"allow"===l}),Object.keys(f).length>0&&(P+="?"+U(f))}x&&(x.consent&&e.consent&&(e.consent=g(x.consent,e.consent)),x.marketing_preferences&&e.marketing_preferences&&(e.marketing_preferences=g(x.marketing_preferences,e.marketing_preferences)));const{email:T,sms:E,consent:$,marketing_preferences:L,allowDuplicate:J,...M}=e,q=document.cookie.replace(/(?:(?:^|.*;\s*)__attentive_id\s*=\s*([^;]*).*$)|^.*$/,"$1");return T?(R={stepID:t,workflowID:r,promoID:o,email:T,device:d,workflows:m,segments:w,promos:h,multivariates:I,EnrolledWorkflows:D,elements:v,isNewProfile:y,platformType:window._juplatformtype||"",currentURL:s,referralURL:l,originalReferralURL:f,UtmSource:O,UtmMedium:b,UtmChannel:j,UtmCampaign:S,properties:{...M},pageID:i.pageID,AllowDuplicate:J},k&&(R.customerID=k),($||L)&&(R={...R,properties:{...M,marketing_preferences:JSON.stringify($||L)}}),q&&(R={...R,properties:{...R.properties,attentive_mobile_visitor_id:q}}),E?R={...R,properties:{...R.properties,sms:E}}:C&&(R={...R,properties:{...R.properties,sms:C}})):(R={stepID:t,workflowID:r,promoID:o,device:d,workflows:m,segments:w,promos:h,multivariates:I,EnrolledWorkflows:D,elements:v,isNewProfile:y,currentURL:s,referralURL:l,platformType:window._juplatformtype||"",originalReferralURL:f,UtmSource:O,UtmMedium:b,UtmChannel:j,UtmCampaign:S,properties:{...M},pageID:i.pageID},k&&(R.customerID=k),($||L)&&(R={...R,properties:{...M,marketing_preferences:JSON.stringify($||L)}}),q&&(R={...R,properties:{...R.properties,attentive_mobile_visitor_id:q}}),E?R={...R,properties:{...R.properties,sms:E}}:C&&(R={...R,properties:{...R.properties,sms:C}}),u&&u.length>0&&(R={...R,email:u.slice(-1)[0],AllowDuplicate:!0})),_(P,R,!0,"POST",{keepalive:!0,gzip:!0})}catch(e){n({promoID:o,workflowID:r,stepID:t,error:e.stack,route:"/v1/public/properties"})}},addToSegment:e=>{const{pApi:t,profile:r}=window._jst,{updateProfile:n}=window._jst.utils,{segments:i}=r,s=`${t}/v1/public/segments?${e.map((e=>`SegmentIDs=${e}`)).join("&")}`;if(i){const t=e.filter((e=>-1===i.indexOf(e)));t.length&&n("segments",[...i,...t])}else n("segments",e);return o(s,{},!0,"POST",!0)},removeFromSegment:e=>{const{pApi:t,profile:r}=window._jst,{updateProfile:n}=window._jst.utils,{segments:i}=r,s=`${t}/v1/public/segments?${e.map((e=>`SegmentIDs=${e}`)).join("&")}`;return i&&n("segments",i.filter((t=>-1===e.indexOf(t)))),o(s,{},!0,"DELETE",!0)},webhook:e=>{const{domain:t,profile:r,pApi:o}=window._jst,{sessionID:n,profileID:i}=r;return!e.settingsProd||!e.settingsProd.URL||fetch(`${o}/v1/public/workflow/webhook`,{method:"POST",body:JSON.stringify({domainID:t,profileID:i,sessionID:n,stepID:e.stepID,workflowID:e.workflowID})}).then((()=>!0)).catch((()=>!0))},workflow:(e,t=!1,r=!1)=>{try{window.ju_workflow_timer||(window.ju_workflow_timer=""),clearTimeout(window.ju_workflow_timer),t||D(e),"workflow-start"!==e.EventType&&y(e,r);const{pApi:o,profile:n,currentUrl:i,referringUrl:s,originalReferringUrl:l}=window._jst,{device:f,workflows:c,segments:a,promos:u,multivariates:p,elements:d,isNewProfile:m,customerID:w,enrolled_workflows:h,utmCampaign:I,utmChannel:_,utmMedium:g,utmSource:v}=n,j=`${o}/v1/public/workflows`,b={pageID:n.pageID,device:f,workflows:c,segments:a,promos:u,multivariates:p,enrolled_workflows:h,elements:d,isNewProfile:m,platformType:window._juplatformtype||"",currentURL:i,referralURL:s,originalReferralURL:l,utmCampaign:I,utmChannel:_,utmMedium:g,utmSource:v,...e};w&&(b.customerID=w),b.tests&&(b.tests=[JSON.stringify(b.tests)]),b.ifElse&&(b.ifElse=[JSON.stringify(b.ifElse)]),k(b),window.ju_workflow_timer=S(j)}catch(t){const{workflowID:r,stepID:o}=e;n({workflowID:r,stepID:o,error:t.stack,route:"/v1/public/workflows"})}},workflowEnd:e=>{const{pApi:t,profile:o,utils:n,domain:i}=window._jst,{updateProfile:s}=n,{completedWorkflows:l=[],sessionID:f,profileID:c}=o,{workflowID:a}=e,u=`${t}/v1/public/workflow-end`,p={pageID:o.pageID,DomainID:i,ProfileID:c,SessionID:f,...e};return s("completedWorkflows",[...l,a]),fetch(u,{method:"POST",body:JSON.stringify(p),redirect:"follow"}).then((e=>r(e.status,200,299)?e.json():e.text().then((e=>e)))).catch((e=>console.error("Error posting workflow end event",e)))},log:n};window._jst.api=j,window.postMessage("ju_loadmainscript")}));
