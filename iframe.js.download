!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t={SAVE_PROFILE_ID:"saveProfileID",GET_PROFILE_ID:"getProfileID",GET_PREVIEW_SESSION:"getPreviewSession",SET_PREVIEW_SESSION:"setPreviewSession"};const e=function(t){const e=t.substring(1);if(e){return e.split("&").reduce(((t,e)=>{const n=e.split("=");return t[n[0]]=n[1],t}),{})}return null}(window.location.search),n=e.d?e.d:null,s=`_jst_profileid_${n}`;const o=(t=>`_jst_preview_${t}`)(n);parent.postMessage({event:"ju_csdiframe_load"},"*"),window.addEventListener("message",(function(e){const{data:n}=e,{payload:i}=n,{GET_PROFILE_ID:c,SAVE_PROFILE_ID:r,GET_PREVIEW_SESSION:a,SET_PREVIEW_SESSION:E}=t;if(n&&i){let t={jstID:n.jstID,action:n.jstAction};switch(n.jstAction){case r:!function(t){try{localStorage.setItem(s,t.id)}catch(t){}}(i);break;case c:{const e=function(){const t={};try{const e=localStorage.getItem(s);e?t.profileID=e:t.message="profile id not found"}catch(t){}return t}();t={...t,...e};break}case a:{const e=function(){let t={};try{const e=sessionStorage.getItem(o);e&&(t=JSON.parse(e))}catch(t){}return t}();t={...t,...e};break}case E:!function(t){try{sessionStorage.setItem(o,JSON.stringify(t))}catch(t){}}(i)}parent.postMessage(t,"*")}}),!1)}));
